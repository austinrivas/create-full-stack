(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{72:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return o})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return m})),a.d(t,"default",(function(){return l}));var r=a(2),i=a(6),n=(a(0),a(80)),o={id:"migrations",title:"Migrations"},s={unversionedId:"migrations",id:"migrations",isDocsHomePage:!1,title:"Migrations",description:"Apollo Server Express",source:"@site/docs/migrations.md",slug:"/migrations",permalink:"/docs/migrations",editUrl:"https://github.com/tiagob/create-full-stack/edit/master/packages/docusaurus/docs/migrations.md",version:"current",sidebar:"someSidebar",previous:{title:"Configuration",permalink:"/docs/configuration"}},m=[{value:"Apollo Server Express",id:"apollo-server-express",children:[{value:"<code>yarn typeorm migration:run</code>",id:"yarn-typeorm-migrationrun",children:[]},{value:"<code>yarn typeorm migration:revert</code>",id:"yarn-typeorm-migrationrevert",children:[]},{value:"<code>yarn typeorm migration:generate -n &lt;title&gt;</code>",id:"yarn-typeorm-migrationgenerate--n-title",children:[]}]},{value:"Hasura",id:"hasura",children:[{value:"<code>yarn hasura migrate apply</code>",id:"yarn-hasura-migrate-apply",children:[]},{value:"<code>hasura migrate status</code>",id:"hasura-migrate-status",children:[]}]}],c={rightToc:m};function l(e){var t=e.components,a=Object(i.a)(e,["components"]);return Object(n.b)("wrapper",Object(r.a)({},c,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h2",{id:"apollo-server-express"},"Apollo Server Express"),Object(n.b)("p",null,"If included, run from ",Object(n.b)("inlineCode",{parentName:"p"},"packages/server"),"."),Object(n.b)("p",null,"Common commands are shown below. Additional commands are documented at ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://typeorm.io/#/migrations"}),"https://typeorm.io/#/migrations")),Object(n.b)("h3",{id:"yarn-typeorm-migrationrun"},Object(n.b)("inlineCode",{parentName:"h3"},"yarn typeorm migration:run")),Object(n.b)("p",null,"Executes all pending migrations and runs them in a sequence ordered by their timestamps. This means all sql queries written in the up methods of your created migrations will be executed."),Object(n.b)("h3",{id:"yarn-typeorm-migrationrevert"},Object(n.b)("inlineCode",{parentName:"h3"},"yarn typeorm migration:revert")),Object(n.b)("p",null,"Executes down in the latest executed migration. If you need to revert multiple migrations you must call this command multiple times."),Object(n.b)("h3",{id:"yarn-typeorm-migrationgenerate--n-title"},Object(n.b)("inlineCode",{parentName:"h3"},"yarn typeorm migration:generate -n <title>")),Object(n.b)("p",null,"Automatically generate migration files in the format ",Object(n.b)("inlineCode",{parentName:"p"},"{TIMESTAMP}-{title}.ts")," with schema changes you made."),Object(n.b)("h2",{id:"hasura"},"Hasura"),Object(n.b)("p",null,"If included, run from ",Object(n.b)("inlineCode",{parentName:"p"},"packages/server"),"."),Object(n.b)("p",null,"Common commands are shown below. Additional commands are documented at ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://hasura.io/docs/1.0/graphql/core/hasura-cli/hasura_migrate.html#hasura-migrate"}),"https://hasura.io/docs/1.0/graphql/core/hasura-cli/hasura_migrate.html#hasura-migrate"),". Learn more about Hasura migrations at ",Object(n.b)("a",Object(r.a)({parentName:"p"},{href:"https://hasura.io/docs/1.0/graphql/core/migrations/index.html"}),"https://hasura.io/docs/1.0/graphql/core/migrations/index.html")),Object(n.b)("h3",{id:"yarn-hasura-migrate-apply"},Object(n.b)("inlineCode",{parentName:"h3"},"yarn hasura migrate apply")),Object(n.b)("p",null,"Applies all migrations to the database."),Object(n.b)("h3",{id:"hasura-migrate-status"},Object(n.b)("inlineCode",{parentName:"h3"},"hasura migrate status")),Object(n.b)("p",null,"Displays the current status of migrations on a database."))}l.isMDXComponent=!0}}]);